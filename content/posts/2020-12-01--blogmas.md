---
title: 'Blogmas 2020'
date: '2020-12-14T00:00:00-0500'
template: 'post'
draft: false
slug: 'blogmas-2020'
tags:
  - '2020'
  - 'Blogmas'
description: 'Megapost of something I coded/learned every day of December until Christmas'
socialImage: '/media/socialImages/blogmas-2020.png'
minutes: '23'
category: 'holidayz'
---

![Blogmas logo](/media/socialImages/blogmas-2020.png)

Welcome to Blogmas 2020 üéä

In the spirit of [Vlogmas](https://filmora.wondershare.com/family-n-personal/what-is-vlogmas.html), I'm participating in Blogmas -- this megapost where I blog daily about something I coded or learned that day.

I'll be tackling side project improvements (including this blog!), exploring new technologies, and building potentially useless things. My [GitHub](https://github.com/karenying) contributions graph and [free-tier](https://www.netlify.com/pricing/) [Netlify](https://www.netlify.com/) build minutes are not ready (I [enabled](https://github.com/karenying/blog.karenying.com/commit/9b70c026a33fd71a4a6613ac919abd87ef077928) [Gatsby incremental builds](https://www.netlify.com/blog/2020/04/23/enable-gatsby-incremental-builds-on-netlify/) for this).

**Emoji legend**:

- ‚öôÔ∏è -- fix / hack
- üé® -- creation
- üìö -- learning a new concept
- ü§î -- investigation / opinion

**Table of contents**:

- [‚öôÔ∏è **12/1**: Bash alias for ISO 8601 formatted time](#Ô∏è-121-bash-alias-for-iso-8601-formatted-time)
- [üé® **12/2**: Animate SVG hamburger menu to X](#-122-animate-svg-hamburger-menu-to-x)
- [‚öôÔ∏è **12/3**: VSCode snippets](#Ô∏è-123-vscode-snippets)
- [üìö **12/4**: Leetcoding in Julia](#-124-leetcoding-in-julia)
- [‚öôÔ∏è **12/5**: Auto generate Prettier config](#Ô∏è-125-auto-generate-prettier-config)
- [üìö **12/6**: Slack logo with CSS Grid](#-126-slack-logo-with-css-grid)
- [üé® **12/7**: Skeleton screens + New preview pic](#-127-skeleton-screens--new-preview-pic)
- [üìö **12/8**: Intro to neural networks](#-128-intro-to-neural-networks)
- [ü§î **12/9**: Spotify Wrapped design analysis](#-129-spotify-wrapped-design-analysis)
- [üé® **12/10**: GitHub Wrapped](#-1210-github-wrapped)
- [üé® **12/11**: Back to top button (part 1)](#-1211-back-to-top-button-part-1)
- [‚öôÔ∏è **12/12**: Back to top button (part 2)](#Ô∏è-1212-back-to-top-button-part-2)
- [‚öôÔ∏è **12/13**: Use plugin to calculate reading time](#Ô∏è-1213-use-plugin-to-calculate-reading-time)
- [ü§î **12/14**: GitHub dark mode is too dark](#-1214-github-dark-mode-is-too-dark)

## ‚öôÔ∏è **12/1**: Bash alias for ISO 8601 formatted time

The [frontmatter](https://www.gatsbyjs.com/docs/adding-markdown-pages/#frontmatter-for-metadata-in-markdown-files) of every blog post requires a timestamp to display on the post and feed. The [Lumen starter](https://github.com/alxshelepenok/gatsby-starter-lumen) that I used had the timestamp formatted in [ISO 8601](https://www.w3.org/TR/NOTE-datetime):

```yaml
date: '2017-08-18T22:12:03.284Z'
```

The `Z` at the end means that the timezone is UTC -- Coordinated Universal Time.

Initially, I was lazy and kept the time as is, only changing the date. Then I decided I wanted the date AND time to accurately reflect when I posted. I would Google "UTC time now" and fill in the details manually -- for some reason I thought this was more efficient than one time figuring out how to account for timezone in ISO 8601.

Thus, I'm finally creating a bash alias called `iso_date` that returns an ISO 8601 date for my frontmatter.

**Side note**: I recently [transitioned](https://github.com/karenying/blog.karenying.com/commit/b8a126413d116d5bd1cc9ecbe45339a35742486b) from using [Moment](https://momentjs.com/) to [Luxon](https://moment.github.io/luxon/) and am using `fromISO` to [parse](https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html#static-method-fromISO) the frontmatter date.

Bash has a [built in](https://www.cyberciti.biz/faq/unix-linux-bash-get-time/) `date` command with field descriptors. With this, we can create our bash alias. We need `%Y`, `%m`, `%d`, `%H`, `%M`, `%S`, and `%z`.

We want our string to look like `%Y-%m-%dT%H:%M:%S%z`. This returns the time in your current timezone which is more readable IMO. It should work as expected:

```bash
$ date +%Y-%m-%dT%H:%M:%S%z
2020-12-01T08:11:10-0500
```

### Save the command

Open `.bash_profile`:

```bash
vim ~/.bash_profile
```

add the alias:

```bash
// Header: .bash_profile
alias iso_date="date +%Y-%m-%dT%H:%M:%S%z"
```

Restart the terminal and yay no more Googling UTC time!

## üé® **12/2**: Animate SVG hamburger menu to X

I've always wanted to make a cool SVG animation. The classic example is smoothly animating a hamburger menu to a close icon:

<div class="blogmas-menu">
  <svg width="100" height="100" viewBox="0 0 100 100">
    <path class="line top" d="M 20,30 H 80"/>
    <path class="line middle" d="M 20,50 H 80" />
    <path class="line bottom" d="M 20,70 H 80"/>
  </svg>
  Hover over me!
</div>

I referenced these two CodePens as inspiration/help:

- [Hamburger Menu](https://codepen.io/ainalem/pen/wvKOEMV) by [Mikael Ainalem](https://codepen.io/ainalem)
- [Pure CSS hamburger icons transition](https://codepen.io/tonkec/pen/XXgdoo) by [Antonija ≈†imiƒá](https://codepen.io/tonkec)

### Implementation

The skeleton HTML SVG code:

```html
// Header: index.html
<svg width="100" height="100" viewBox="0 0 100 100">
  <path class="line top" d="M 20,30 H 80" />
  <path class="line middle" d="M 20,50 H 80" />
  <path class="line bottom" d="M 20,70 H 80" />
</svg>
```

`<path>` elements draw the lines based on `M` (move to `x, y`) and `H` (horizontal line to `x`). So this snippet draws three horizontal lines.

And we'll define some CSS for these lines:

```css
// Header: index.css
.line {
  stroke-width: 6;
  stroke-linecap: round;
  stroke: #8deaff;
  transition: all 500ms;
}
```

- `stroke-width` determines how thicc the lines are
- `stroke-linecap` changes the ends of the lines to round
  - **Side note**: `stroke-linecap: butt` is the [default value](https://css-tricks.com/almanac/properties/s/stroke-linecap/#values) üçë
- `stroke` sets the color
- `transition` is normal CSS -- we want all the transitions to occur over half a second

Now, we use more CSS to animate the lines on hover via class selectors. Specifically, we want the top and bottom lines to rotate 45 degrees about their left ends and we want the middle line to disappear.

For the top and bottom lines we need to set their `transform-origin` initially:

```css
// Header: index.css
.top {
  transform-origin: 26px 40px;
}

.bottom {
  transform-origin: 26px 60px;
}
```

I had to play around with `transform-origin` to get them to rotate as expected.

And for the middle bar:

```css
// Header: index.css
.middle {
  stroke-dasharray: 60 60;
}
```

We initialize the line to have 60 dashes. In order for the initial appearance to look gapless, we display all 60 dashes. When we transform, we'll only show one dash.

CSS for the hover effects:

```css
// Header: index.css
.menu:hover .line {
  stroke: #ff7c7c;
}

.menu:hover .top {
  transform: rotate(45deg);
}

.menu:hover .middle {
  stroke-dasharray: 1 60;
  stroke-dashoffset: -30;
}

.menu:hover .bottom {
  transform: rotate(-45deg);
}
```

Every line changes color, we rotate top and bottom, and reduce the middle line to one dash while moving it to the middle!

See my [CodePen](https://codepen.io/karenying/pen/MWjwzMo) and [GitHub repo](https://github.com/karenying/menu-to-x-animation).

## ‚öôÔ∏è **12/3**: VSCode snippets

I looked into [VSCode snippets](https://code.visualstudio.com/docs/editor/userdefinedsnippets) today and made my own to help speed up React development in particular.

### Empty function component: `comp`

**Snippet**:

```json
{
  "react functional component": {
    "scope": "javascript",
    "prefix": "comp",
    "body": ["const $1 = ({ $2 }) => {", "", "\treturn (", "", "\t)", "}"]
  }
}
```

**Output**:

<!-- prettier-ignore -->
```jsx
const /* 1st cursor */ = ({ /* 2nd cursor */ }) => {

  return (

  )
}
```

### useEffect hook: `useE`

**Snippet**:

```json
{
  "useEffect hook": {
    "scope": "javascript, typescript, javascriptreact, typescriptreact",
    "prefix": "useE",
    "body": ["useEffect(() => {", "\t$1", "})"]
  }
}
```

**Output**:

<!-- prettier-ignore -->
```jsx
useEffect(() => {
  /* CURSOR */
})
```

### useState hook: `useS`

**Snippet**:

```json
{
  "useState hook": {
    "scope": "javascript, typescript, javascriptreact, typescriptreact",
    "prefix": "useS",
    "body": ["const [$1, $2] = useState($3);$0"]
  }
}
```

**Output**:

<!-- prettier-ignore -->
```jsx
const [/* 1st */, /* 2nd */] = useState(/* 3rd */);
```

### ClassName: `cla`

**Snippet**:

```json
{
  "className": {
    "scope": "javascript, typescript, javascriptreact, typescriptreact",
    "prefix": "cla",
    "body": ["className=\"$1\""]
  }
}
```

**Output**:

<!-- prettier-ignore -->
```jsx
className="[CURSOR]"
```

## üìö **12/4**: Leetcoding in Julia

**Confession time**: I got to name my sister and I named her Julia. I think I told my parents I picked it because I thought it was a pretty name. But actually, I named her after this girl I hated in preschool. See, I was upset that my sister's birth meant that we couldn't go to Disney World because she was too young. So I did the pettiest thing a 4 y/o could think of üòà

Anyways, I thought I'd try out the language that has been coined "the next Python", [Julia](https://julialang.org/). What better way to learn a new language than to solve the classic [LeetCode](https://leetcode.com/) problem, [Two Sum](https://leetcode.com/problems/two-sum/), with it?

I'm too lazy to configure the environment so I'm using an [online IDE](https://www.tutorialspoint.com/execute_julia_online.php) instead.

Here's my solution:

```julia
// Header: main.jl
function twosum(nums, target)
  d = Dict()

  for i in eachindex(nums)
    if haskey(d, (target - nums[i]))
      return [d[target - nums[i]], i]
    else
      d[nums[i]] = i
    end
  end
end

@show twosum([2,7,11,15], 9)
```

Running it, we get:

```bash
$julia main.jl
twosum([2, 7, 11, 15], 9) = [1, 2]
```

### Initial comments

- The syntax strikes me as a mix between Python and Ruby
- Arrays and dictionaries operate as expected -- except it's **1-BASED INDEXING**
- `@show` [macro](https://riptutorial.com/julia-lang/example/6355/reimplementing-the--show-macro) is cool

### Overall thoughts

Julia was designed for performance in mind which is always _s e x y_. While my solution is untyped, Julia is dynamically typed. We also love being ~flexy~. BUT the one thing I can't get on board with is 1-based indexing ü§Æ All in all impressed, I like it, and excited to see more mainstream usage!

**Rate**: 6.5/10

## ‚öôÔ∏è **12/5**: Auto generate Prettier config

[Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) is one of my favorite VSCode extensions. I like creating a Prettier config for every project based on the same template and tweak it slightly depending on the proj. I found myself copy and pasting the same `.prettierrc` file every time which is pure nonsense.

Thus I wrote a bash script to generate the template:

```bash
// Header: prettier.sh
#!/bin/bash

cat > .prettierrc << "EOF"
{
  "tabWidth": 2,
  "singleQuote": true,
  "jsxSingleQuote": true,
  "semi": true,
  "trailingComma": "es5",
  "bracketSpacing": true,
  "jsxBracketSameLine": false,
  "arrowParens": "always",
  "printWidth": 80
}
EOF
```

And added a bash alias:

```bash
// Header: .bash_profile
alias pret="sh ~/Documents/Projects/prettier.sh"
```

Now all I have to do is type `pret` in my terminal!

## üìö **12/6**: Slack logo with CSS Grid

As someone who's been team [Flexbox](https://css-tricks.com/snippets/css/a-guide-to-flexbox/), I wanted to see what's up with all the hype around [Grid](https://css-tricks.com/snippets/css/complete-guide-grid/).

The Slack logo fits exactly in a 4 x 4 grid so we're gonna recreate it with divs (please never make your logo and put it on your site as divs omg).

![slack logo](/media/blogmas/slack-logo.png)

For our grid container, we'll declare each cell to be `50px` big and the gap between to be `12px`:

```css
// Header: index.css
.grid {
  display: grid;
  grid-template-columns: 50px 50px 50px 50px;
  grid-template-rows: 50px 50px 50px 50px;
  grid-gap: 12px;
}
```

Now we can fill in with our divs:

```html
// Header: index.html
<div class="grid">
  <div class="blue a"></div>
  <div class="blue b"></div>
  <div class="green a"></div>
  <div class="green b"></div>
  <div class="yellow a"></div>
  <div class="yellow b"></div>
  <div class="red a"></div>
  <div class="red b"></div>
</div>
```

Each div has a color class name as well as `a` if it's one-celled, or `b` if it takes up two cells.

Let's look at the CSS for the blue section:

```css
// Header: index.css
.blue.a {
  grid-column: 2;
  grid-row: 1;
}

.blue.b {
  grid-column: 1 / 3;
  grid-row: 2;
}
```

`.blue.a` only takes up one cell, so we only need to declare its row and column which are `1` and `2` respectively (Grid is 1-indexed):

![slack](/media/blogmas/slack-grid.png#width=300px)

`.blue.b` is in the 2nd row so we put `2` for that. Then for `column`, we use `start / finish` (the div extends _up to_ `finish`). `.blue.b` starts at column 1 and ends right before column 3 which gives us `1 / 3`.

We can fill out the rest of the colors by examining which cells they lie in. I also added more CSS to configure the colors and rounded borders. You can see the demo on [CodePen](https://codepen.io/karenying/pen/gOwPZYZ) and the full code on [GitHub](https://github.com/karenying/css-grid-slack-logo).

Our finished product is pretty close üòÄ

![slack](/media/blogmas/slack.png)

### Overall thoughts

Grid is pretty easy to use! It definitely has a ton of other features that I didn't explore in this simple build. It makes sense to use it for 2D layouts instead of just nesting Flexbox (@me oops). I bet I will frequent CSS-Tricks' [Grid guide](https://css-tricks.com/snippets/css/complete-guide-grid/) as I start to use Grid more often (the [Flexbox guide](https://css-tricks.com/snippets/css/a-guide-to-flexbox/) has been a lifesaver).

**Rate**: 8/10

## üé® **12/7**: Skeleton screens + New preview pic

I think skeleton screens are so cute -- I made one for the desktop view of this site's homepage:

![skeleton](/media/blogmas/skeleton.png)_Peep Figma [file](https://www.figma.com/file/Lsc48j3IOX6mHODbjR3tq8/skeleton-frame?node-id=0%3A1)_

In practice, perhaps only the right side (posts) would be abstracted but I just wanted to simplify as much as possible! And since my site is static, this wouldn't really be applicable anyways üòõ

Skeleton screens, especially with left to right motion animations, make the load time seem faster. I read about them more in depth [here](https://uxdesign.cc/what-you-should-know-about-skeleton-screens-a820c45a571a). Thinking about animating a skeleton screen as a future blogmas post!\*

Btw, I changed this site's preview pic to a variation of the above skeleton screen:
![preview](/media/blogmas/preview.png)

She cute, she cute af. I'm obsessed ü•∞ (the old preview was the cover image of my <a href="/posts/v2-0-stable-release" target="_blank">v2.0 Stable Release post</a>).

\***Update**: Just merged a PR for [work](https://www.wellsheet.com/) that animated a skeleton screen for a loading state! I lifted code from this [CodePen](https://codepen.io/viktorstrate/pen/yoBRLy).

## üìö **12/8**: Intro to neural networks

Hi, my name is Karen and I'm allergic to React class components, supporting IE 11, infra dev, and ... oh yeah, mAcHiNe LeArNiNg.

I'm challenging the last one by doing [Victor Zhou](http://victorzhou.com/)'s top post/tutorial -- [Machine Learning for Beginners: An Introduction to Neural Networks](https://victorzhou.com/blog/intro-to-neural-networks/). I dropped Princeton's ELE 435: Machine Learning and Pattern Recognition, after the midterm so this should be interesting.

Let's do it!

1. **Building Blocks: Neurons**
   - Ya makes sense
   - **Side note**: I thought NumPy was pronounced "num-pee" until someone told me it's Numerical Python not Numerical Pee-thon
2. **Combining Neurons into a Neural Network**
   - Mmm we good
3. **Training a Neural Network, Part 1**
   - Still following but MSE is giving me PTSD to my [ORFE](https://orfe.princeton.edu/home) days
4. **Training a Neural Network, Part 2**
   - Alright I was doing okay until we got to the multi part, and then my eyes glazed over üôÑ
   - Well I trust the math/code and SGD makes sense on a high level

### Overall thoughts

The tutorial opens with:

> This post is intended for complete beginners and assumes ZERO prior knowledge of machine learning.

And I mean ya dat me and it was easy enough to follow -- I enjoyed how well-structured it was with the diagrams, tables, code blocks etc.

However, I still feel the same way towards ML -- not really interested in the theory/math behind it because it's a bunch of icky calc and lin alg. Maybe I'd be more interested in the applications (`import sklearn` amiright). But then again, applying ML = training model, waiting for results, tweaking params, repeat ... soooooo I think I'll just stick to web dev.

**Rate**: 8 (post itself), 3 (content) ‚Üí 5.5/10

## ü§î **12/9**: Spotify Wrapped design analysis

_Written while listening to my [Top Songs 2020 playlist](https://open.spotify.com/playlist/37i9dQZF1EMaba5daAs6pY?si=wFKQvUuVT7m7rKz6UlG0BQ)_

I read this [article](https://medium.com/throughdesign/spotify-2019-wrapped-a-design-masterstroke-1d06b27b0aec) around this time last year about Spotify Wrapped 2019's UI/UX design. Here's my take on this year's.

Spotify Wrapped is the most simple form of data viz. It shows that the app can do `+=1`, yay! Yet people still eat it up because of its nice UI along with how personal and immersive the experience feels.

We'll start off with the 4 basic colors Spotify used:

![wrapped palette](/media/blogmas/wrapped-palette.png)_Spotify Wrapped 2020 palette created with [Coolors](https://coolors.co/)_

I've written about this [before](https://blog.karenying.com/posts/50-shades-of-dark-mode-gray#spotify-macos-app) -- Spotify's dark-mode only UI allows for colorful album art to pop, just like how theaters dim their lights for shows. Thus, these 4 bright colors especially stand out amongst the darker backgrounds. You can see the same effect on _this_ site.

![wrapped banner](/media/blogmas/wrapped-banner.PNG#width=300px)

With these 4 colors, Spotify only uses 2 pairings throughout the story -- dark blue with green, and pink with cyan. These pairings have relatively high [contrast ratios](https://blog.karenying.com/posts/boost-visual-accessibility-by-auto-flipping-text-color#wcag-and-contrast-ratio) which increases text legibility (light green with cyan would be too hard to read). Here's an example of the dark pink on cyan:

![wrapped cover](/media/blogmas/wrapped-cover.PNG#width=300px)

In addition to this fixed color palette, Spotify also uses a rainbow-ish gradient as a common theme. This vertical gradient features the dark blue, cyan, and green from the palette, as well as black and warmer sunset-like hues. It appears primarily as a background, with the other 4 colors in the foreground. The gradient is also animated in the story. Its vertical movement gives more depth and a sense of momentum, allowing the data to seem more interesting.

You would think that this combo of colors from all across the spectrum would clash. However IMO, the gradient really ties the contrasting colors together. You end up with a sort of tropical / beachy / summery vibe.

These bright colors, along with uplifting comments such as:

> Even in 2020, you still found ways to grow

> You're a pioneer

make you reflect on your year of music with a positive attitude. And that's their goal -- they want you to like this recap so much that you share it with friends and on social media (if you didn't IG story it, did you even listen to music?). Spotify's stock [soared](https://www.investors.com/news/technology/spotify-stock-jumps-wrapped-report-joe-rogan-exclusivity/) because of this Wrapped hype. Clearly they have found a winning marketing/branding strat.

Well here's my 2020 Spotify Wrapped:

![my wrapped](/media/blogmas/wrapped-me.JPG#width=300px)

Just a girl who likes to beep boop while listening to beep boop music!

## üé® **12/10**: GitHub Wrapped

Amidst all this end of the year recap hype, I designed a GitHub Wrapped:

![GitHub Wrapped](/media/blogmas/github_wrapped.png)_Peep Figma [file](https://www.figma.com/file/8p6E29dFwAkosTTAgrQR0O/github-wrapped?node-id=0%3A1)_

2020 was definitely a big coding year for me! I switched my major to CS at the end of 2019, so this year has just been me diving into the world of web dev. I worked on some full stack stuff and realized I definitely have a pref for frontend and an interest in product / design.

GitHub was at the center of all this -- it's my most visited page on Chrome. At this point, I'd think it's hot if someone [named a branch](https://twitter.com/lil_morgy/status/1291871226936221697) after me ü•∫

## üé® **12/11**: Back to top button (part 1)

_Implemented an hour before my **first** final exam_

This Blogmas post is getting obscenely long so I created a back to top button that hangs around the bottom right corner of posts.

I decided on an upwards chevron from [Ionicons](https://ionicons.com/) but I'm using it through [React Icons](https://react-icons.github.io/react-icons/search?q=arrow). **Side note**: At some point I wanna stop using React Icons and just import the SVGs but I'm lazy.

This is the design I settled on for mobile:

![back to top button](/media/blogmas/backtotop.png#width=300px)

The mobile button is different from the desktop version. I toyed with just having the icon have the shadow, but I felt like it didn't stand out enough on mobile because it was on top of white text. The desktop version is just the chevron to the right of the text, completely flat. The desktop icon has a shadow on hover (not the entire button). This is consistent with the home button in the top left corner.

### Implementation

All the CSS isn't very interesting -- except that of course it's `position: fixed` and I had to use `calc` for the desktop version to ensure that it was the right distance from the middle content.

Adding the back to top click handler wasn't hard either:

```jsx
const scrollToTop = () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
};

<div onClick={scrollToTop} />;
```

`scroll-behavior: smooth` has [better browser compatibility](https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior) than `window.scrollTo` but I couldn't get it to work üòû

A trickier thing was getting the button to hide when the user is scrolling. This is for mobile only. I tested it on desktop but it seemed unnecessary since the button wasn't over text. This is what I ended up doing:

```jsx
const [opacity, setOpacity] = useState(1);

useEffect(() => {
  let timeoutID;
  const onScroll = () => {
    setOpacity(0);
    clearTimeout(timeoutID);

    timeoutID = setTimeout(() => {
      setOpacity(1);
    }, 100);
  };

  window.addEventListener('scroll', onScroll);

  return () => {
    window.removeEventListener('scroll', onScroll);
    clearTimeout(timeoutID);
  };
}, []);

<div onClick={scrollToTop} style={{ opacity }} />;
```

with a `transition: opacity 100ms` property for the div.

**Let's break this down**:

- First, we define the opacity of the button as a state variable and set it with in-line styling
- On mount, we add an event listener for scrolling -- `onScroll` is called every time the user scrolls
- Immediately after detecting scrolling, we set the opacity of the div to `0` (I chose opacity instead of `display: none` because we can't use `transition` on `display`)
- We clear the previous timer and set a new one for 100ms
- After 100ms, if a new scroll hasn't been detected, then the div's opacity is restored to `1`
- On unmount, we remove the scroll listener and clean up the timeout

Another way I could have done this is using refs:

```jsx
const scrollRef = useRef();

useEffect(() => {
  let timeoutID;
  const onScroll = () => {
    scrollRef.current.style.opacity = 0;
    clearTimeout(timeoutID);

    timeoutID = setTimeout(() => {
      scrollRef.current.style.opacity = 1;
    }, 100);
  };
}, []);

<div onClick={scrollToTop} ref={scrollRef} />;
```

While the using a state variable triggers a rerender every time and using refs does not, the first implementation is considered the "correct" React way. It's [declarative](https://fjorgedigital.com/insights/blog/the-philosophy-of-react-declarative-rendering/) -- in the first case, it _declares_ what the opacity should be and the state variable _reacts_ to change the CSS. The second method directly (imperatively) sets the opacity with `ref.current`.

Either way, I'm happy with how it turned out!\*

\***Update**: Was not happy with how it turned out and hence this next post üò°

## ‚öôÔ∏è **12/12**: Back to top button (part 2)

_Implemented an hour before my **second** final exam_

Hiding the back to top button on every scroll was a lil distracting even on mobile. Instead, I want it to be hidden if the user is scrolling _down_, but visible if the user scrolls _up_. I'm also making the home button appear at the top simultaneously.

Here's what they look like (you should be able to see on mobile!):

![new back to top button](/media/blogmas/home_button.jpg#width=300px)

![home button](/media/blogmas/new_backtotop.jpg#width=300px)

I added a border to both because they weren't very visible without.

### Implementation

Like the resourceful dev that I am, I basically stole the code from this [Stack Overflow answer](https://stackoverflow.com/questions/62497110/detect-scroll-direction-in-react-js/62497293#62497293) üòÄ

I replaced the previous scroll handler with this:

```jsx
const [isScrollingUp, setScrollDir] = useState(false);

useEffect(() => {
  const minShowThreshold = 812;
  let lastScrollY = window.pageYOffset;
  let isScrolling = true;
  let requestID;

  const updateScrollDir = () => {
    const scrollY = window.pageYOffset;

    setScrollDir(scrollY > minShowThreshold && scrollY < lastScrollY);
    lastScrollY = scrollY;
    isScrolling = true;
  };

  const onScroll = () => {
    if (isScrolling) {
      requestID = window.requestAnimationFrame(updateScrollDir);
      isScrolling = false;
    }
  };

  window.addEventListener('scroll', onScroll);

  return () => {
    cancelAnimationFrame(requestID);
    window.removeEventListener('scroll', onScroll);
  };
}, []);
```

And a separate `useEffect` handles the opacity:

```jsx
useEffect(() => {
  setOpacity(isScrollingUp ? 1 : 0);
}, [isScrollingUp]);
```

**Side note**: I remember being shook that you could have multiple `useEffects` in the same component, each with different dependencies ü§Ø

**Let's break this down**:

- While scrolling, we keep the old position, and check if the new position is higher than the old. If it is, then we set `isScrollingUp` as true
- I set a `minShowThreshold` of `812px` so that when the user is close to the top of the page, the buttons wouldn't show even if they are scrolling up
- `isScrolling` makes sure that `updateScrollDir` is only called once per repaint. The code works without the `requestAnimationFrame` business. It's basically just acting as throttling so I guess I'll keep it
- In a separate `useEffect`, I set the opacity of the buttons based on `isScrollingUp`

This is hopefully the last part of the back to top saga!

## ‚öôÔ∏è **12/13**: Use plugin to calculate reading time

_Implemented before my **third** and **fourth** (last!) finals and written after_

Yay we're officially more than halfway through Blogmas and done with fall semester üéâ

Before, I calculated time read by legit copy and pasting a post into a Medium draft and stealing their calculation (or just taking it if the post was already on Medium). I had a `minutes` field in the frontmatter of every post and would query it.

Instead of this jank approach, I'm using the `gatsby-remark-reading-time` [plugin](https://www.gatsbyjs.com/plugins/gatsby-remark-reading-time-v2/). I followed the installation instructions and it worked without any hiccups.\* Now I don't have to manually update the frontmatter after every Blogmas minipost!

This plugin uses the `reading-time` [package](https://github.com/ngryman/reading-time). I [peeped](https://github.com/ngryman/reading-time/blob/master/lib/reading-time.js) at how it calculates number of minutes. It seems like it doesn't count images like [Medium does](https://blog.medium.com/read-time-and-you-bc2048ab620c).

Here are the posts where there's a difference in calculated reading time between Medium and this plugin:

| Post                                                                                                                                                              | Medium | `reading-time` |
| :---------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----: | :------------: |
| [Let 2020 be the year PNG icons die](https://blog.karenying.com/posts/let-2020-be-the-year-png-icons-die)                                                         |   4    |       3        |
| [Configuring a Mac for a PC User](https://blog.karenying.com/posts/configuring-a-mac-for-a-pc-user)                                                               |   6    |       7        |
| [Annoy (or Impress) Your Coworkers with a Slack Bot From Scratch](https://blog.karenying.com/posts/annoy-or-impress-your-coworkers-with-a-slack-bot-from-scratch) |   8    |       9        |
| [50 Shades of Dark Mode Gray](https://blog.karenying.com/posts/50-shades-of-dark-mode-gray)                                                                       |   8    |       9        |
| [Boost Visual Accessibility by Auto Flipping Text Color](https://blog.karenying.com/posts/boost-visual-accessibility-by-auto-flipping-text-color)                 |   7    |       10       |
| [Pixels vs. Bricks](https://blog.karenying.com/posts/pixels-vs-bricks)                                                                                            |   5    |       4        |
| [Simple React Router Nav Bar](https://blog.karenying.com/posts/nav-bar-with-dots)                                                                                 |   4    |       6        |

We can see that **images** increase Medium's calculated time, whereas **codeblocks** increase the plugin's (on Medium I embedded GitHub gists).

Which one is more accurate? ü§∑üèª‚Äç‚ôÄÔ∏è

\***Update**: UmmMMMmMmMm this plugin has a race condition I swear so I'm reverting back to my old ways of just relying on Medium. I would click a post or next page and sometimes nothing would render until I refreshed. The console would say that the `readingTime` was undefined in the GraphQL query which would cause the page to crash. Maybe I set it up wrong? Idk I'll have to investigate more

## ü§î **12/14**: GitHub dark mode is too dark

Today's minipost ended up being its own [post](https://blog.karenying.com/posts/github-darkmode-sucks).\* Back to our regularly scheduled programming tomorrow!

\***Update**: I'm currently 2 days ahead of Blogmas which explains this timestamp -- On 12/12, [GitHub Dark Mode is Too Dark](https://blog.karenying.com/posts/github-darkmode-sucks) peaked at [#2](<(https://news.ycombinator.com/item?id=25400139)>) on the front page of [Hacker News](https://news.ycombinator.com/) üòÆ
